customElements.define("date-counter",class extends HTMLElement{get date(){return new Date(this.getAttribute("date")||"2038-01-19 03:14:07")}get eventname(){return this.getAttribute("event")||"Y2K38 Epochalypse <a href='https://en.wikipedia.org/wiki/Year_2038_problem' style='text-decoration:none;font-size:40%'>wtf?</a>"}get count(){return["years","days","hours","minutes","seconds"]}connectedCallback(){var e=this.getAttribute("count")?.split(",")||this.count.filter((e=>!this.hasAttribute("no"+e))),t=this.count.map((e=>new Intl.RelativeTimeFormat(this.getAttribute("locale")||"en",{numeric:"auto"}).formatToParts(10,e)[2].value.trim())),n=this.count.reduce(((n,r,a)=>(e.includes(r)&&n.push(t[a]),n)),[]),r=({name:e="div",id:t,append:n=[],...r})=>(this[t]=Object.assign(document.createElement(e),{id:t,...r}),this[t].append(...n),this[t].setAttribute("part",t),this[t]),a=(e,t,n,r=`${e}-${t}`,a=`--${this.localName}-${r}`)=>`${t}:${this.getAttribute(r)||`var(${a},${n})`};`;this.attachShadow({mode:"open"}).append(r({name:"style",innerHTML:":host {display:inline-block;"+a("","font-family","arial")+a("","width","",6*e.length+"rem")+"}#event{"+a("event","padding","0 1rem")+a("event","background","gold")+a("event","color","black")+a("event","text-align","center")+a("event","font-size","2.5rem")+"}"+`#counters{display:grid;grid:1fr/repeat(${e.length},1fr);grid-auto-flow:row;`+a("counters","background","green")+a("counters","color","white")+a("counters","text-align","center")+a("counters","font-size","2.5rem")+'}[part*="label"]{'+a("label","padding","0 1rem")+a("label","font-size",".4em")+"}"}),r({id:"event",innerHTML:`<slot>${this.eventname}</slot>`}),r({id:"counters",append:e.map((t=>r({id:t+"date",append:[r({id:t,innerHTML:"0"}),r({id:t+"label",innerHTML:(n[e.indexOf(t)]||"").toUpperCase()})]})))}));var i=setInterval((()=>{var t=this.difference(this.date);e.map((e=>this["_"+e]==t[e]?0:this[e].innerHTML=this["_"+e]=t[e])),e.every((e=>0==t[e]))&&clearInterval(i)}),1e3)}difference(e,t=new Date,n=new Date(e)){for(var r=n<t&&([t,n]=[n,t]),a=n-t,i=864e5,s={years:~~(a/(365*i))},o=0,l=t.getFullYear();l<n.getFullYear();l++)(l%4==0&&l%100!=0||l%400==0)&&(r?o--:o++);return s.days=~~((a-=s.years*i*365)/i)+o,s.hours=~~((a-=(s.days-o)*i)/36e5),s.minutes=~~((a-=1e3*s.hours*60*60)/6e4),s.seconds=~~((a-=1e3*s.minutes*60)/1e3),s}});