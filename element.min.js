customElements.define("date-counter",class extends HTMLElement{get date(){return new Date(this.getAttribute("date")||"2038-01-19 03:14:07")}get eventname(){return this.getAttribute("event")||"Y2K38 Epochalypse"}connectedCallback(){var e,t,n=["years","days","hours","minutes","seconds"],a=this.getAttribute("count")?.split(",")||n.filter((e=>!this.hasAttribute("no"+e))),r=n.map((e=>new Intl.RelativeTimeFormat(this.getAttribute("locale")||"en").formatToParts(10,e)[2].value.trim())),i=({tag:e="div",id:t,append:n=[],...a})=>(this[t]=Object.assign(document.createElement(e),{id:t,...a}),this[t].append(...n),this[this[t].part=t]),s=(e,t,n)=>`${t}:${this.getAttribute(e+"-"+t)||`var(--date-counter-${e}-${t},${n})`};`;this.attachShadow({mode:"open"}).append(i({tag:"style",innerHTML:":host{display:inline-block;"+s("","font-family","arial")+s("","width","",a.length)+"}#event{"+s("event","padding","0 1rem")+s("event","background","gold")+s("event","color","black")+s("event","text-align","center")+s("event","font-size","2.5rem")+"}"+`#counters{display:grid;grid:1fr/repeat(${a.length},1fr);grid-auto-flow:row;`+s("counters","background","green")+s("counters","color","white")+s("counters","text-align","center")+s("counters","font-size","2.5rem")+'}[part*="label"]{'+s("label","padding","0 1rem")+s("label","font-size",".5em")+s("label","text-transform","uppercase")+"}"}),i({id:"event",innerHTML:`<slot>${this.eventname}</slot>`}),i({id:"counters",append:a.map((e=>i({id:e+"date",append:[i({id:e,innerHTML:"0"}),i({id:e+"label",innerHTML:n.reduce(((e,t,n)=>(a.includes(t)&&e.push(r[n]),e)),[])[a.indexOf(e)]||""})]})))})),e=setInterval((()=>{t=this.Interval(this.date),a.map((e=>this["_"+e]==t[e]?0:this[e].innerHTML=this["_"+e]=t[e])),a.every((e=>0==t[e]))&&clearInterval(e)}),1e3)}Interval(e,t=new Date,n=new Date(e)){var a,r=n<t&&([t,n]=[n,t]),i=n-t,s=864e5,l={years:~~(i/(365*s))},d=0;for(a=t.getFullYear();a<n.getFullYear();a++)(a%4==0&&a%100!=0||a%400==0)&&(r?d--:d++);return l.days=~~((i-=l.years*s*365)/s)+d,l.hours=~~((i-=(l.days-d)*s)/36e5),l.minutes=~~((i-=36e5*l.hours)/6e4),l.seconds=~~((i-=6e4*l.minutes)/1e3),l}});