customElements.define("date-counter",class extends HTMLElement{get date(){return new Date(this.getAttribute("date")||"2038-01-19 03:14:07")}get eventname(){return this.getAttribute("event")||"Y2K38 Epochalypse <a href=//en.wikipedia.org/wiki/Y2K38 style=font-size:40%>wtf?</a>"}connectedCallback(e=["years","days","hours","minutes","seconds"],t=this.getAttribute("count")?.split(",")||e.filter((e=>!this.hasAttribute("no"+e))),n=e.map((e=>new Intl.RelativeTimeFormat(this.getAttribute("locale")||"en",{numeric:"auto"}).formatToParts(10,e)[2].value.trim())),a=(({tag:e="div",id:t,append:n=[],...a})=>(this[t]=Object.assign(document.createElement(e),{id:t,...a}),this[t].append(...n),this[this[t].part=t])),i=((e,t,n,a=`${e}-${t}`,i=`--${this.localName}-${a}`)=>`${t}:${this.getAttribute(a)||`var(${i},${n})`};`),r,s){this.attachShadow({mode:"open"}).append(a({tag:"style",innerHTML:":host {display:inline-block;"+i("","font-family","arial")+i("","width","",5*t.length+"rem")+"}#event{"+i("event","padding","0 1rem")+i("event","background","gold")+i("event","color","black")+i("event","text-align","center")+i("event","font-size","2.5rem")+"}"+`#counters{display:grid;grid:1fr/repeat(${t.length},1fr);grid-auto-flow:row;`+i("counters","background","green")+i("counters","color","white")+i("counters","text-align","center")+i("counters","font-size","2.5rem")+'}[part*="label"]{'+i("label","padding","0 1rem")+i("label","font-size",".5em")+i("label","text-transform","uppercase")+"}"}),a({id:"event",innerHTML:`<slot>${this.eventname}</slot>`}),a({id:"counters",append:t.map((i=>a({id:i+"date",append:[a({id:i,innerHTML:"0"}),a({id:i+"label",innerHTML:e.reduce(((e,a,i)=>(t.includes(a)&&e.push(n[i]),e)),[])[t.indexOf(i)]||""})]})))})),r=setInterval((()=>{s=this.difference(this.date),t.map((e=>this["_"+e]==s[e]?0:this[e].innerHTML=this["_"+e]=s[e])),t.every((e=>0==s[e]))&&clearInterval(r)}),1e3)}difference(e,t=new Date,n=new Date(e),a=n<t&&([t,n]=[n,t]),i=n-t,r=864e5,s={years:~~(i/(365*r))},l=0,o){for(o=t.getFullYear();o<n.getFullYear();o++)(o%4==0&&o%100!=0||o%400==0)&&(a?l--:l++);return s.days=~~((i-=s.years*r*365)/r)+l,s.hours=~~((i-=(s.days-l)*r)/36e5),s.minutes=~~((i-=1e3*s.hours*60*60)/6e4),s.seconds=~~((i-=1e3*s.minutes*60)/1e3),s}});